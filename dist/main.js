(()=>{"use strict";document.querySelector(".popup__input_place"),document.querySelector(".popup__input_image"),document.querySelector(".element__title"),document.querySelector(".element__image");var e=document.querySelector(".popup_type_edit-profile"),t=document.querySelector(".popup_type_edit-card"),o=document.querySelector(".popup_type_image"),n=document.querySelector(".profile__edit-button"),r=(document.querySelector(".popup__close-button"),document.querySelector(".popup__submit-button"),document.querySelector(".popup"),document.querySelector(".popup__input_name")),i=document.querySelector(".popup__input_description"),u=document.querySelector(".profile__name"),l=document.querySelector(".profile__name_info"),c=(document.querySelector(".elements"),document.querySelector("#element").content.querySelector(".element"),document.querySelector(".card-template"),document.querySelector(".additor"),document.querySelector(".profile__add-button")),a=(document.querySelector(".additor__close-button"),document.querySelector(".popup__submit-button")),p=o.querySelector(".popup__image-title"),s=o.querySelector(".popup__image"),f=(o.querySelector(".popup__close-button"),document.querySelector(".popup_type_edit-avatar")),m=(document.querySelector(".profile__edit-avatar-button-container"),f.querySelector(".popup__submit-button"),document.querySelector(".profile__image")),y={formSelector:".popup__form",formProfileSelector:".popup__form_profile",formCardSelector:".additor__form",inputSelector:".popup__input",inputValidClass:"popup__input_valid",inputErrorClass:"popup__input_invalid",submitButtonSelector:".popup__submit-button",activeButtonSelector:"popup__submit-button_active",disabledButtonSelector:"popup__submit-button_disabled",errorClass:"popup__error_visible"},v=Array.from(document.querySelectorAll(y.formSelector));function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function b(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==d(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===d(r)?r:String(r)),n)}var r}var _=function(){function e(t,o){var n=t.items,r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=n,this._renderer=r,this._container=document.querySelector(o)}var t,o;return t=e,(o=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this.clear(),console.log("_renderedItems = ",this._renderedItems),this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&b(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function S(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==h(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===h(r)?r:String(r)),n)}var r}var g=function(){function e(t,o,n){var r=n.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=t.name,this._link=t.link,this._cardSelector=o,this._handleCardClick=r,this._element=void 0}var t,o;return t=e,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__image").addEventListener("click",(function(t){e._handleCardClick(t)}));var t=this._element.querySelector(".element__like-button");t.addEventListener("click",(function(){t.classList.toggle("element__like-button"),t.classList.toggle("element__like-button-heart_active")})),this._element.querySelector(".element__delete-button").addEventListener("click",(function(e){e.target.closest(".element").remove()}))}},{key:"generateCard",value:function(){this._element=this._getTemplate();var e=this._element.querySelector(".element__image");this._setEventListeners(),e.src=this._link,e.alt=this._title,this._element.querySelector(".element__title").textContent=this._title}},{key:"getElement",value:function(){return this._element}},{key:"getCard",value:function(){return{name:this._title,link:this._link}}}])&&S(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function j(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==k(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===k(r)?r:String(r)),n)}var r}var w=function(){function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t,this._formElement=document.querySelector(t),this._inputSelector=o.inputSelector,this._inputValidClass=o.inputValidClass,this._inputErrorClass=o.inputErrorClass,this._submitButtonSelector=o.submitButtonSelector,this._activeButtonClass=o.activeButtonSelector,this._disabledButtonSelector=o.disabledButtonSelector,this._errorClass=o.errorClass}var t,o;return t=e,(o=[{key:"_showInputError",value:function(e,t){var o=e.querySelector("#".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),t.classList.remove(this._inputValidClass),o.textContent=t.validationMessage,o.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e,t){var o=e.querySelector("#".concat(t.id,"-error"));t.classList.add(this._inputValidClass),t.classList.remove(this._inputErrorClass),o.textContent="",o.classList.remove(this._errorClass)}},{key:"_checkInputValidity",value:function(e,t){t.validity.valid?this._hideInputError(e,t):this._showInputError(e,t)}},{key:"_activeSubmitButton",value:function(e){e.classList.remove(this._disabledButtonSelector),e.classList.add(this._activeButtonClass),e.disabled=!1}},{key:"disableSubmitButton",value:function(e){e.classList.remove(this._activeButtonSelector),e.classList.add(this._disabledButtonSelector),e.disabled=!0}},{key:"_checkFormValidity",value:function(e,t){e?this.disableSubmitButton(t):this._activeSubmitButton(t)}},{key:"_setEventListeners",value:function(e){var t=this,o=Array.from(e.querySelectorAll(this._inputSelector)),n=e.querySelector(this._submitButtonSelector);o.forEach((function(r){r.addEventListener("input",(function(){t._checkInputValidity(e,r);var i=o.some((function(e){return!e.validity.valid}));t._checkFormValidity(i,n)}))}))}},{key:"enableValidation",value:function(){var e=this;v.forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()})),e._setEventListeners(t)}))}}])&&j(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function P(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==E(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===E(r)?r:String(r)),n)}var r}var q=function(){function e(t){var o=t.profileName,n=t.profileDescription,r=t.profileAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=o,this._profileDescription=n,this._profileAvatar=r}var t,o;return t=e,(o=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,description:this._profileDescription.textContent,avatar:this._profileAvatar.textContent}}},{key:"setUserInfo",value:function(e){this._profileName.textContent=e.name,this._profileDescription.textContent=e.description}},{key:"setUseAvatar",value:function(e){this._profileAvatar.src=e.avatar}}])&&P(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function L(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==C(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===C(r)?r:String(r)),n)}var r}var O=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this.escClose=this._handleEscClose.bind(this)}var t,o;return t=e,(o=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.closePopup()}},{key:"setEventListeners",value:function(){var e=this;this._popupSelector.querySelector(".popup__close-button").addEventListener("click",this.closePopup.bind(this)),this._popupSelector.addEventListener("click",(function(t){t.target.closest(".popup__form")||e.closePopup()}))}},{key:"openPopup",value:function(){this._popupSelector.classList.add("popup__opened"),this._popupSelector.classList.remove("popup"),document.addEventListener("keyup",this.escClose)}},{key:"closePopup",value:function(){this._popupSelector.classList.remove("popup__opened"),this._popupSelector.classList.add("popup"),document.removeEventListener("keyup",this.escClose)}}])&&L(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function T(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==B(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===B(r)?r:String(r)),n)}var r}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var n=V(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:o):r.value}},I.apply(this,arguments)}function V(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H(e)););return e}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function A(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(u,e);var t,o,n,r,i=(n=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=H(n);if(r){var o=H(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return A(this,e)});function u(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,e)}return t=u,(o=[{key:"openPopup",value:function(e){console.log("item = ",e),console.log("item.name = ",e.name),console.log("item.link = ",e.link),p.textContent=e.name,s.src=e.link,I(H(u.prototype),"openPopup",this).call(this)}}])&&T(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),u}(O);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function F(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==D(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!==D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===D(r)?r:String(r)),n)}var r}function Z(){return Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var n=z(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:o):r.value}},Z.apply(this,arguments)}function z(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}function G(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(u,e);var t,o,n,r,i=(n=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(n);if(r){var o=K(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return G(this,e)});function u(e,t){var o,n=t.formSubmitHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(o=i.call(this,e))._formSubmitHandler=n,o}return t=u,(o=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._popupSelector.querySelectorAll(".popup__input"),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;this._popupSelector.addEventListener("submit",(function(t){t.preventDefault(),e._formSubmitHandler(e._getInputValues()),e.closePopup()})),Z(K(u.prototype),"setEventListeners",this).call(this)}},{key:"_updateAvatarImage",value:function(e){var t=this._popupSelector.querySelector(".profile__image-container");t&&(t.style.backgroundImage="url(".concat(e,")"))}},{key:"renderLoading",value:function(e){this._popupSelector.querySelector(".popup__submit-button").textContent=e?"Сохранение...":"Сохранить"}},{key:"closePopup",value:function(){this._popupSelector.querySelector(".popup__form").reset(),Z(K(u.prototype),"closePopup",this).call(this)}},{key:"handleFormSubmit",value:function(e){this._formSubmitHandler(e)}}])&&F(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),u}(O),U=new w(y.formProfileSelector,y);U.enableValidation();var M=new w(y.formCardSelector,y);M.enableValidation();var W=new N(e,{formSubmitHandler:function(e){Y.setUserInfo(e)}});W.setEventListeners();var Y=new q({profileName:u,profileDescription:l,profileAvatar:m});n.addEventListener("click",(function(){U.disableSubmitButton(a),W.openPopup();var e=Y.getUserInfo();r.value=e.name,i.value=e.description}));var Q=new N(t,{formSubmitHandler:function(e){ee(e)}});Q.setEventListeners(),c.addEventListener("click",(function(){M.disableSubmitButton(a),Q.openPopup()}));var J=new x(o);function $(e){console.log("item_ = ",e),console.log("item_.srcElement = ",e.srcElement);var t={name:e.srcElement.alt,link:e.srcElement.src};J.openPopup(t)}function ee(e){console.log("lala1");var t=new g(e,"#element",{handleCardClick:$});console.log("card_object = ",t),t.generateCard();var o=t.getElement();console.log("elem = ",o),te.addItem(o),o.querySelectorAll(".lazy").forEach((function(e){e.addEventListener("load",(function(){e.classList.remove("blur")}))}))}J.setEventListeners();var te=new _({items:[{name:"Я дома ❤️",link:"https://i.postimg.cc/9MtjTkG9/7sgAP5O.jpg"},{name:"Первый раз в садах!",link:"https://i.postimg.cc/TYPXLChy/GfBJ26w.jpg"},{name:"Красота 😍",link:"https://i.postimg.cc/Kj0Spgpv/c2wSJYl.jpg"},{name:"Сколько тебе лет? Мне п... один лет...год ",link:"https://i.postimg.cc/WpWHKjb3/wAcZWbL.jpg"},{name:"Ковер 😵",link:"https://i.postimg.cc/BZp0ndZ9/zqeCLNm.jpg"},{name:"🦇",link:"https://i.postimg.cc/pX1MDzns/oF0fhOQ.jpg"},{name:"HB",link:"https://i.postimg.cc/YCGK806M/U8PNrQl.jpg"},{name:"Ищу подарки...",link:"https://i.postimg.cc/85G21bqz/uZGZDvH.jpg"},{name:"🎂",link:"https://i.postimg.cc/0yTg4vnm/Rm4qy15.jpg"},{name:":(",link:"https://i.postimg.cc/hG1C0R5K/MFoe60f.jpg"},{name:"❤️❤️❤️",link:"https://i.postimg.cc/9f5SppXY/weHPmB8.jpg"},{name:"... --- ... ",link:"https://i.postimg.cc/XqHmk6Xr/4lXc5Ed.jpg"},{name:"Кайфушечки",link:"https://i.postimg.cc/8cpgbbH0/jWw8sqo.jpg"},{name:"А вообще у меня много талантов!",link:"https://i.postimg.cc/m2k02k6C/6Qhqocf.jpg"},{name:"🌸",link:"https://i.postimg.cc/vBGKRZV1/5FIrHhd.jpg"},{name:"Ку-ку",link:"https://i.postimg.cc/W37Qtkv6/1fA1F7S.jpg"},{name:"В бабушкиных розочках",link:"https://i.postimg.cc/0jQHQXZP/UeqzZIp.jpg"},{name:"Крутость этого фото зашкаливает",link:"https://i.postimg.cc/15bYmHF1/q6hyAhG.jpg"},{name:"Ронни",link:"https://i.postimg.cc/sDLbBzt8/TBgcPxu.jpg"},{name:"Приветики!",link:"https://i.postimg.cc/85kZKX2M/56c0742.jpg"},{name:"L`académie de magie Beauxbâtons",link:"https://i.postimg.cc/rmgPq21f/fkP8VhZ.jpg"},{name:"🧡",link:"https://i.postimg.cc/nzd06Yx5/vkKHFv1.jpg"},{name:"Как то так",link:"https://i.postimg.cc/GtVzpLHx/EOcpXAi.jpg"},{name:"👅",link:"https://i.postimg.cc/8cjtDJPC/DM5Kntz.jpg"},,{name:"white always",link:"https://i.postimg.cc/SKhT8xVZ/SBjYUo9.jpg"},{name:"Ронни в гости приехал!",link:"https://i.postimg.cc/nL4WwDCb/cpvfPk9.jpg"},{name:"Совместное фото",link:"https://i.postimg.cc/fR0pmFsb/HlvLNpV.jpg"},{name:"Ну какава красота",link:"https://i.postimg.cc/fRXqJ97t/pyVqk3o.jpg"}],renderer:ee},".elements");console.log("cardList = ",te),te.renderItems();var oe=document.querySelector(".popup_type_edit-avatar"),ne=oe.querySelector(".popup__input_place"),re=oe.querySelector(".popup__submit-button"),ie=new N(f,{formSubmitHandler:function(e){console.log("item [PopupWithForm] = "),Y.setUseAvatar(e)}});ie.setEventListeners(),document.querySelector(".profile__edit-avatar-button").addEventListener("click",(function(){ne.value="",ue.disableSubmitButton(re),ie.openPopup()})),ie.setEventListeners();var ue=new w(".popup__form_avatar",y);ue.enableValidation(),re.addEventListener("click",(function(e){e.preventDefault();var t={avatar:ne.value};ie.handleFormSubmit(t),ie.closePopup()})),document.querySelectorAll(".lazy").forEach((function(e){e.addEventListener("load",(function(){e.classList.remove("blur")}))}))})();